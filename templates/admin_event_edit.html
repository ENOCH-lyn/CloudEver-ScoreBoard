{% extends 'base.html' %}
{% block content %}
<div class="card">
  <h2>编辑比赛</h2>
  <form method="post" action="/admin/events/{{ event.id }}/edit">
    <label>名称</label>
    <input name="name" value="{{ event.name }}" required />

    <label>开始时间</label>
    <div class="row">
      <input id="start" name="start" type="datetime-local" value="{{ event.start_time.strftime('%Y-%m-%dT%H:%M') if event.start_time }}" style="max-width:260px" />
      <button class="btn secondary" type="button" onclick="document.getElementById('start').showPicker && document.getElementById('start').showPicker()">选择开始时间</button>
    </div>

    <label>结束时间</label>
    <div class="row">
      <input id="end" name="end" type="datetime-local" value="{{ event.end_time.strftime('%Y-%m-%dT%H:%M') if event.end_time }}" style="max-width:260px" />
      <button class="btn secondary" type="button" onclick="document.getElementById('end').showPicker && document.getElementById('end').showPicker()">选择结束时间</button>
    </div>

  <label>比赛权重</label>
    <input name="weight" value="{{ '%.2f'|format(event.weight or 1.0) }}" />

    <label>类型</label>
    <select name="event_type_id">
      {% for t in types %}
        <option value="{{ t.id }}" {% if event.event_type_id == t.id %}selected{% endif %}>{{ t.name }}</option>
      {% endfor %}
    </select>
    <label>备注（可选）</label>
    <textarea name="remark" rows="3" placeholder="比赛说明或备注">{{ event.remark or '' }}</textarea>


    <div style="margin-top:12px" class="row">
      <button class="btn" type="submit">保存</button>
      <a class="btn secondary" href="/admin/events">返回</a>
    </div>
  </form>
</div>
{% endblock %}
